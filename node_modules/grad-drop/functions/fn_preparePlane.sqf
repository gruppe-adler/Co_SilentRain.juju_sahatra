params ["_plane", "_marker", "_height", "_waitBeforeJump", "_giveParachute"];

if (!isServer) exitWith {

	private _fnc_create = {
		params ["_plane","_relPos"];

		private _light = "#lightpoint" createVehicle position _plane;
		_light setLightBrightness 0.7;
		_light setLightAmbient [0.3,0.3,0.3];
		_light setLightColor [0.5, 0.5, 0.7];
		_light lightAttachObject [_plane,_relPos];

		_light
	};

	_lightFront = [_plane,[0,-6.5,-2.3]] call _fnc_create;
	_lightMid = [_plane, [0,-2,-2.3]] call _fnc_create;
	_lightRear = [_plane, [0,3,-2.3]] call _fnc_create;

	_plane setVariable ["grad_drop_lightpoints", [_lightFront, _lightMid, _lightRear]];

};

private _planesPrepared = missionNameSpace getVariable ["GRAD_drop_planesPrepared", []];

_planesPrepared pushBack [
	_plane,
	_marker,
	_height,
	_waitBeforeJump,
	_giveParachute
];

missionNameSpace setVariable ["GRAD_drop_planesPrepared", _planesPrepared, true];

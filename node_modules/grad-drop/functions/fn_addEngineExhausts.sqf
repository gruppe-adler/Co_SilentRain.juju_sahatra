params ["_plane"];

private _smoke = [];

for "_i" from 0 to 3 do {
    private _selection = ["engine_1_prop", "engine_2_prop", "engine_3_prop" , "engine_4_prop"] select _i;
    private _selectionposition = _plane selectionPosition _selection;
    private _emitter = [_plane, _selectionposition] call GRAD_drop_fnc_addSmoke;

    _smoke pushBack _emitter;
};

[{
    isNull (_this select 0)
},{
    (deleteVehicle _x) forEach (_this select 1);
}, [_plane, _smoke]] call CBA_fnc_waitUntilAndExecute;
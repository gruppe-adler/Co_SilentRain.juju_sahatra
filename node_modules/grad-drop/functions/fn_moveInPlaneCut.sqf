#include "..\component.hpp"

params ["_unit"];

private _timeToDark = 3;

if (!hasInterface) exitWith {};
if (!isPlayer _unit) exitWith {}; // dont start cut sequence for AI
_unit setUnitFreefallHeight 1000;

if (!isNil "grad_drop_debug") exitWith {
	systemChat "debug: skipping cut sequence";
};

_timeToDark fadeSound 0;

cutText ["", "BLACK OUT", _timeToDark];
sleep _timeToDark;

addCamShake [2, 400, 0.7];

titleText ["","PLAIN"];
titleFadeOut 12;

sleep _timeToDark;

_timeToDark fadeSound 1;

"dynamicBlur" ppEffectEnable true;
"dynamicBlur" ppEffectAdjust [6];
"dynamicBlur" ppEffectCommit 0;
"dynamicBlur" ppEffectAdjust [0.0];
"dynamicBlur" ppEffectCommit 5;

titleCut ["", "BLACK IN", _timeToDark];

_unit setUnitFreefallHeight 20;
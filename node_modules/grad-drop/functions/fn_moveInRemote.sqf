#include "..\component.hpp"

params ["_unit","_planeInSky", "_giveParachute"];

if (_giveParachute) then {
    if (isClass (configFile >> "CfgPatches" >> "zade_boc") && isPlayer _unit) then {[_unit] call zade_boc_fnc_actionOnChest};
    removeBackpack _unit;
    _unit addBackpackGlobal "NonSteerable_Parachute_F";
};

_planeInSky hideObject false;
_unit allowDamage false;

[{
    detach _this;

    _this switchMove "AidlPknlMstpSnonWnonDnon_G01";
    _this disableAI "MOVE";
    _this disableAI "ANIM";

    if (!isNil "grad_drop_debug") then {
        private _debugMarker = "VR_3DSelector_01_default_F" createVehicleLocal [0,0,0];
        _debugMarker setPos (getPos _this);
    };

    [_this] call ace_weaponselect_fnc_putWeaponAway;
}, _unit, 2] call CBA_fnc_waitAndExecute; 